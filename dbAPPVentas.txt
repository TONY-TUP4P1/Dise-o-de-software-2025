USE MASTER
GO

IF EXISTS(SELECT* FROM SYS.DATABASES WHERE NAME='AppVentas') 
DROP DATABASE AppVentas; 
GO
-- Crear la base de datos AppVentas
CREATE DATABASE AppVentas;
GO

-- Seleccionar la base de datos
USE AppVentas;
GO

-- Crear tabla CategoriaProducto
CREATE TABLE CategoriaProducto (
    IDCategoriaProducto INT PRIMARY KEY IDENTITY(1,1),
    Nombre NVARCHAR(100) NOT NULL
);

-- Crear tabla Producto
CREATE TABLE Producto (
    IDProducto INT PRIMARY KEY IDENTITY(1,1),
    Stock INT NOT NULL,
    Nombre NVARCHAR(100) NOT NULL,
    LugarProcedencia NVARCHAR(100) NOT NULL,
    UnidadMedida NVARCHAR(20) NOT NULL,  -- Kilos o sacos
    Precio DECIMAL(10, 2) NOT NULL,
    IDCategoriaProducto INT,
    FOREIGN KEY (IDCategoriaProducto) REFERENCES CategoriaProducto(IDCategoriaProducto)
);

-- Crear tabla Cliente
CREATE TABLE Clientes (
    IDCliente INT PRIMARY KEY IDENTITY(1,1),
    Direccion NVARCHAR(200),
    Telefono NVARCHAR(20),
    Nombres NVARCHAR(100),
    CorreoElectronico NVARCHAR(100),
    Apellido NVARCHAR(100),
    DNI NVARCHAR(20)
);

-- Crear tabla Productor
CREATE TABLE Productor (
    IDProductor INT PRIMARY KEY IDENTITY(1,1),
    TipoProducto NVARCHAR(100),  -- Tuberculos, Verduras, Frutas, etc.
    Certificacion NVARCHAR(50),  -- Puede ser "Activa" o "No activa"
    Telefono NVARCHAR(20),
    CorreoElectronico NVARCHAR(100),
    NombresApellidos NVARCHAR(200),
);

CREATE TABLE ProductorxProducto (
    IDProducto INT,
    IDProductor INT,
    FOREIGN KEY (IDProducto) REFERENCES Producto(IDProducto),
    FOREIGN KEY (IDProductor) REFERENCES Productor(IDProductor)
); --NEW TABLE

-- Crear tabla Venta
CREATE TABLE Venta (
    IDVenta INT PRIMARY KEY IDENTITY(1,1),
    FechaVenta DATETIME NOT NULL,
    MontoTotal DECIMAL(10, 2) NOT NULL,
    IDCliente INT,  -- Relacionado con el cliente
    FOREIGN KEY (IDCliente) REFERENCES Clientes(IDCliente)
);

-- Crear tabla DetalleVenta
CREATE TABLE DetalleVenta (
    IDDetalleVenta INT PRIMARY KEY IDENTITY(1,1),
    Cantidad INT NOT NULL,
    PrecioVenta DECIMAL(10, 2) NOT NULL,
    ProductoID INT,  -- Relacionado con Producto
    VentaID INT,  -- Relacionado con Venta
    FOREIGN KEY (ProductoID) REFERENCES Producto(IDProducto),
    FOREIGN KEY (VentaID) REFERENCES Venta(IDVenta)
);

-- Crear tabla Reseña
CREATE TABLE Reseña (
    IDReseña INT PRIMARY KEY IDENTITY(1,1),
    Fecha DATETIME NOT NULL,
    Idioma NVARCHAR(20),  -- Español o Quechua
    Comentario NVARCHAR(500),
    Calificacion INT CHECK (Calificacion BETWEEN 1 AND 10),
    EstadoProducto NVARCHAR(50),  -- Ej. "Bueno", "Regular", "Malo"
);

CREATE TABLE ClientesxReseña (
    IDCliente INT,
    IDReseña INT,
    FOREIGN KEY (IDCliente) REFERENCES Clientes(IDCliente),
    FOREIGN KEY (IDReseña) REFERENCES Reseña(IDReseña)
); --NEW TABLE



-- Insertar datos en CategoriaProducto
INSERT INTO CategoriaProducto (Nombre) VALUES ('Tubérculos');
INSERT INTO CategoriaProducto (Nombre) VALUES ('Verduras');
INSERT INTO CategoriaProducto (Nombre) VALUES ('Frutas');
INSERT INTO CategoriaProducto (Nombre) VALUES ('Legumbres');
INSERT INTO CategoriaProducto (Nombre) VALUES ('Cereales');
INSERT INTO CategoriaProducto (Nombre) VALUES ('Lácteos');
INSERT INTO CategoriaProducto (Nombre) VALUES ('Carnes');
INSERT INTO CategoriaProducto (Nombre) VALUES ('Pescados');
INSERT INTO CategoriaProducto (Nombre) VALUES ('Bebidas');
INSERT INTO CategoriaProducto (Nombre) VALUES ('Condimentos');

-- Insertar datos en Producto
INSERT INTO Producto (Stock, Nombre, LugarProcedencia, UnidadMedida, Precio, IDCategoriaProducto) 
VALUES (100, 'Papa', 'Junín', 'Kilos', 1.50, 1);
INSERT INTO Producto (Stock, Nombre, LugarProcedencia, UnidadMedida, Precio, IDCategoriaProducto) 
VALUES (200, 'Zanahoria', 'Huancayo', 'Kilos', 2.00, 2);
INSERT INTO Producto (Stock, Nombre, LugarProcedencia, UnidadMedida, Precio, IDCategoriaProducto) 
VALUES (150, 'Manzana', 'Cerro de Pasco', 'Kilos', 3.00, 3);
INSERT INTO Producto (Stock, Nombre, LugarProcedencia, UnidadMedida, Precio, IDCategoriaProducto) 
VALUES (120, 'Lentejas', 'Lima', 'Kilos', 4.00, 4);
INSERT INTO Producto (Stock, Nombre, LugarProcedencia, UnidadMedida, Precio, IDCategoriaProducto) 
VALUES (180, 'Arroz', 'Piura', 'Kilos', 2.50, 5);
INSERT INTO Producto (Stock, Nombre, LugarProcedencia, UnidadMedida, Precio, IDCategoriaProducto) 
VALUES (90, 'Leche', 'Arequipa', 'Litros', 3.50, 6);
INSERT INTO Producto (Stock, Nombre, LugarProcedencia, UnidadMedida, Precio, IDCategoriaProducto) 
VALUES (70, 'Pollo', 'Cusco', 'Kilos', 7.00, 7);
INSERT INTO Producto (Stock, Nombre, LugarProcedencia, UnidadMedida, Precio, IDCategoriaProducto) 
VALUES (60, 'Trucha', 'Puno', 'Kilos', 8.00, 8);
INSERT INTO Producto (Stock, Nombre, LugarProcedencia, UnidadMedida, Precio, IDCategoriaProducto) 
VALUES (110, 'Jugo de Naranja', 'Ica', 'Litros', 5.00, 9);
INSERT INTO Producto (Stock, Nombre, LugarProcedencia, UnidadMedida, Precio, IDCategoriaProducto) 
VALUES (130, 'Pimienta', 'Tacna', 'Gramos', 6.00, 10);

-- Insertar datos en Clientes
INSERT INTO Clientes (Direccion, Telefono, Nombres, CorreoElectronico, Apellido, DNI) 
VALUES ('Av. Principal 123', '987654321', 'Juan', 'juan@example.com', 'Pérez', '12345678');
INSERT INTO Clientes (Direccion, Telefono, Nombres, CorreoElectronico, Apellido, DNI) 
VALUES ('Calle Secundaria 456', '987654322', 'María', 'maria@example.com', 'González', '87654321');
INSERT INTO Clientes (Direccion, Telefono, Nombres, CorreoElectronico, Apellido, DNI) 
VALUES ('Jr. Los Olivos 789', '987654323', 'Pedro', 'pedro@example.com', 'Ramírez', '23456789');
INSERT INTO Clientes (Direccion, Telefono, Nombres, CorreoElectronico, Apellido, DNI) 
VALUES ('Av. Las Flores 101', '987654324', 'Ana', 'ana@example.com', 'Torres', '34567890');
INSERT INTO Clientes (Direccion, Telefono, Nombres, CorreoElectronico, Apellido, DNI) 
VALUES ('Calle Los Pinos 202', '987654325', 'Luis', 'luis@example.com', 'Martínez', '45678901');
INSERT INTO Clientes (Direccion, Telefono, Nombres, CorreoElectronico, Apellido, DNI) 
VALUES ('Jr. Las Rosas 303', '987654326', 'Carmen', 'carmen@example.com', 'López', '56789012');
INSERT INTO Clientes (Direccion, Telefono, Nombres, CorreoElectronico, Apellido, DNI) 
VALUES ('Av. Los Cedros 404', '987654327', 'José', 'jose@example.com', 'Díaz', '67890123');
INSERT INTO Clientes (Direccion, Telefono, Nombres, CorreoElectronico, Apellido, DNI) 
VALUES ('Calle Los Sauces 505', '987654328', 'Elena', 'elena@example.com', 'Rojas', '78901234');
INSERT INTO Clientes (Direccion, Telefono, Nombres, CorreoElectronico, Apellido, DNI) 
VALUES ('Jr. Las Magnolias 606', '987654329', 'Miguel', 'miguel@example.com', 'Fernández', '89012345');
INSERT INTO Clientes (Direccion, Telefono, Nombres, CorreoElectronico, Apellido, DNI) 
VALUES ('Av. Los Álamos 707', '987654330', 'Lucía', 'lucia@example.com', 'Castro', '90123456');

-- Insertar datos en Productor
INSERT INTO Productor (TipoProducto, Certificacion, Telefono, CorreoElectronico, NombresApellidos) 
VALUES ('Tubérculos', 'Activa', '987654331', 'productor1@example.com', 'Carlos López');
INSERT INTO Productor (TipoProducto, Certificacion, Telefono, CorreoElectronico, NombresApellidos) 
VALUES ('Frutas', 'No activa', '987654332', 'productor2@example.com', 'Ana Martínez');
INSERT INTO Productor (TipoProducto, Certificacion, Telefono, CorreoElectronico, NombresApellidos) 
VALUES ('Verduras', 'Activa', '987654333', 'productor3@example.com', 'Luis García');
INSERT INTO Productor (TipoProducto, Certificacion, Telefono, CorreoElectronico, NombresApellidos) 
VALUES ('Legumbres', 'No activa', '987654334', 'productor4@example.com', 'María Rodríguez');
INSERT INTO Productor (TipoProducto, Certificacion, Telefono, CorreoElectronico, NombresApellidos) 
VALUES ('Cereales', 'Activa', '987654335', 'productor5@example.com', 'Pedro Sánchez');
INSERT INTO Productor (TipoProducto, Certificacion, Telefono, CorreoElectronico, NombresApellidos) 
VALUES ('Lácteos', 'No activa', '987654336', 'productor6@example.com', 'Carmen Torres');
INSERT INTO Productor (TipoProducto, Certificacion, Telefono, CorreoElectronico, NombresApellidos) 
VALUES ('Carnes', 'Activa', '987654337', 'productor7@example.com', 'José Díaz');
INSERT INTO Productor (TipoProducto, Certificacion, Telefono, CorreoElectronico, NombresApellidos) 
VALUES ('Pescados', 'No activa', '987654338', 'productor8@example.com', 'Elena Rojas');
INSERT INTO Productor (TipoProducto, Certificacion, Telefono, CorreoElectronico, NombresApellidos) 
VALUES ('Bebidas', 'Activa', '987654339', 'productor9@example.com', 'Miguel Fernández');
INSERT INTO Productor (TipoProducto, Certificacion, Telefono, CorreoElectronico, NombresApellidos) 
VALUES ('Condimentos', 'No activa', '987654340', 'productor10@example.com', 'Lucía Castro');

-- Insertar datos en ProductorxProducto
INSERT INTO ProductorxProducto (IDProducto, IDProductor) VALUES (1, 1);
INSERT INTO ProductorxProducto (IDProducto, IDProductor) VALUES (2, 3);
INSERT INTO ProductorxProducto (IDProducto, IDProductor) VALUES (3, 2);
INSERT INTO ProductorxProducto (IDProducto, IDProductor) VALUES (4, 4);
INSERT INTO ProductorxProducto (IDProducto, IDProductor) VALUES (5, 5);
INSERT INTO ProductorxProducto (IDProducto, IDProductor) VALUES (6, 6);
INSERT INTO ProductorxProducto (IDProducto, IDProductor) VALUES (7, 7);
INSERT INTO ProductorxProducto (IDProducto, IDProductor) VALUES (8, 8);
INSERT INTO ProductorxProducto (IDProducto, IDProductor) VALUES (9, 9);
INSERT INTO ProductorxProducto (IDProducto, IDProductor) VALUES (10, 10);

-- Insertar datos en Venta
INSERT INTO Venta (FechaVenta, MontoTotal, IDCliente) 
VALUES ('2025-02-18', 200.00, 2);
INSERT INTO Venta (FechaVenta, MontoTotal, IDCliente) 
VALUES ('2025-02-19', 250.00, 3);
INSERT INTO Venta (FechaVenta, MontoTotal, IDCliente) 
VALUES ('2025-02-20', 300.00, 4);
INSERT INTO Venta (FechaVenta, MontoTotal, IDCliente) 
VALUES ('2025-02-21', 350.00, 5);
INSERT INTO Venta (FechaVenta, MontoTotal, IDCliente) 
VALUES ('2025-02-22', 400.00, 6);
INSERT INTO Venta (FechaVenta, MontoTotal, IDCliente) 
VALUES ('2025-02-23', 450.00, 7);
INSERT INTO Venta (FechaVenta, MontoTotal, IDCliente) 
VALUES ('2025-02-24', 500.00, 8);
INSERT INTO Venta (FechaVenta, MontoTotal, IDCliente) 
VALUES ('2025-02-25', 550.00, 9);
INSERT INTO Venta (FechaVenta, MontoTotal, IDCliente) 
VALUES ('2025-02-26', 600.00, 10);

-- Insertar datos en DetalleVenta
INSERT INTO DetalleVenta (Cantidad, PrecioVenta, ProductoID, VentaID) 
VALUES (10, 1.50, 1, 1);
INSERT INTO DetalleVenta (Cantidad, PrecioVenta, ProductoID, VentaID) 
VALUES (20, 2.00, 2, 2);
INSERT INTO DetalleVenta (Cantidad, PrecioVenta, ProductoID, VentaID) 
VALUES (15, 3.00, 3, 3);
INSERT INTO DetalleVenta (Cantidad, PrecioVenta, ProductoID, VentaID) 
VALUES (12, 4.00, 4, 4);
INSERT INTO DetalleVenta (Cantidad, PrecioVenta, ProductoID, VentaID) 
VALUES (18, 2.50, 5, 5);
INSERT INTO DetalleVenta (Cantidad, PrecioVenta, ProductoID, VentaID) 
VALUES (9, 3.50, 6, 6);
INSERT INTO DetalleVenta (Cantidad, PrecioVenta, ProductoID, VentaID) 
VALUES (7, 7.00, 7, 7);
INSERT INTO DetalleVenta (Cantidad, PrecioVenta, ProductoID, VentaID) 
VALUES (6, 8.00, 8, 8);
INSERT INTO DetalleVenta (Cantidad, PrecioVenta, ProductoID, VentaID) 
VALUES (11, 5.00, 9, 9);
INSERT INTO DetalleVenta (Cantidad, PrecioVenta, ProductoID, VentaID) 
VALUES (13, 6.00, 10, 10);

-- Insertar datos en Reseña
INSERT INTO Reseña (Fecha, Idioma, Comentario, Calificacion, EstadoProducto) 
VALUES ('2025-02-17', 'Español', 'Muy buen producto', 9, 'Bueno');
INSERT INTO Reseña (Fecha, Idioma, Comentario, Calificacion, EstadoProducto) 
VALUES ('2025-02-18', 'Quechua', 'Producto regular', 6, 'Regular');
INSERT INTO Reseña (Fecha, Idioma, Comentario, Calificacion, EstadoProducto) 
VALUES ('2025-02-19', 'Español', 'Excelente calidad', 10, 'Bueno');
INSERT INTO Reseña (Fecha, Idioma, Comentario, Calificacion, EstadoProducto) 
VALUES ('2025-02-20', 'Quechua', 'No me gustó', 4, 'Malo');
INSERT INTO Reseña (Fecha, Idioma, Comentario, Calificacion, EstadoProducto) 
VALUES ('2025-02-21', 'Español', 'Muy fresco', 8, 'Bueno');
INSERT INTO Reseña (Fecha, Idioma, Comentario, Calificacion, EstadoProducto) 
VALUES ('2025-02-22', 'Quechua', 'Regular calidad', 5, 'Regular');
INSERT INTO Reseña (Fecha, Idioma, Comentario, Calificacion, EstadoProducto) 
VALUES ('2025-02-23', 'Español', 'Producto aceptable', 7, 'Bueno');
INSERT INTO Reseña (Fecha, Idioma, Comentario, Calificacion, EstadoProducto) 
VALUES ('2025-02-24', 'Quechua', 'Muy bueno', 9, 'Bueno');
INSERT INTO Reseña (Fecha, Idioma, Comentario, Calificacion, EstadoProducto) 
VALUES ('2025-02-25', 'Español', 'Calidad media', 6, 'Regular');
INSERT INTO Reseña (Fecha, Idioma, Comentario, Calificacion, EstadoProducto) 
VALUES ('2025-02-26', 'Quechua', 'Producto excelente', 10, 'Bueno');

-- Insertar datos en ClientesxReseña
INSERT INTO ClientesxReseña (IDCliente, IDReseña) VALUES (1, 1);
INSERT INTO ClientesxReseña (IDCliente, IDReseña) VALUES (2, 2);
INSERT INTO ClientesxReseña (IDCliente, IDReseña) VALUES (3, 3);
INSERT INTO ClientesxReseña (IDCliente, IDReseña) VALUES (4, 4);
INSERT INTO ClientesxReseña (IDCliente, IDReseña) VALUES (5, 5);
INSERT INTO ClientesxReseña (IDCliente, IDReseña) VALUES (6, 6);
INSERT INTO ClientesxReseña (IDCliente, IDReseña) VALUES (7, 7);
INSERT INTO ClientesxReseña (IDCliente, IDReseña) VALUES (8, 8);
INSERT INTO ClientesxReseña (IDCliente, IDReseña) VALUES (9, 9);
INSERT INTO ClientesxReseña (IDCliente, IDReseña) VALUES (10, 10);

--Mostrar

CREATE PROCEDURE MostrarRegistrosCategoriaProducto
AS
BEGIN
    SELECT * FROM CategoriaProducto;
END;
GO

CREATE PROCEDURE MostrarRegistrosProducto
AS
BEGIN
    SELECT * FROM Producto;
END;
GO

CREATE PROCEDURE MostrarRegistrosClientes
AS
BEGIN
    SELECT * FROM Clientes;
END;
GO

CREATE PROCEDURE MostrarRegistrosProductor
AS
BEGIN
    SELECT * FROM Productor;
END;
GO

CREATE PROCEDURE MostrarRegistrosVenta
AS
BEGIN
    SELECT * FROM Venta;
END;
GO

CREATE PROCEDURE MostrarRegistrosDetalleVenta
AS
BEGIN
    SELECT * FROM DetalleVenta;
END;
GO

CREATE PROCEDURE MostrarRegistrosReseña
AS
BEGIN
    SELECT * FROM Reseña;
END;
GO

--Insertar
CREATE PROCEDURE InsertarCategoriaProducto
    @Nombre NVARCHAR(100)
AS
BEGIN
    INSERT INTO CategoriaProducto (Nombre)
    VALUES (@Nombre);
END;
GO

CREATE PROCEDURE InsertarProducto
    @Stock INT,
    @Nombre NVARCHAR(100),
    @LugarProcedencia NVARCHAR(100),
    @UnidadMedida NVARCHAR(20),
    @Precio DECIMAL(10, 2),
    @IDCategoriaProducto INT
AS
BEGIN
    INSERT INTO Producto (Stock, Nombre, LugarProcedencia, UnidadMedida, Precio, IDCategoriaProducto)
    VALUES (@Stock, @Nombre, @LugarProcedencia, @UnidadMedida, @Precio, @IDCategoriaProducto);
END;
GO

CREATE PROCEDURE InsertarCliente
    @Direccion NVARCHAR(200),
    @Telefono NVARCHAR(20),
    @Nombres NVARCHAR(100),
    @CorreoElectronico NVARCHAR(100),
    @Apellido NVARCHAR(100),
    @DNI NVARCHAR(20)
AS
BEGIN
    INSERT INTO Clientes (Direccion, Telefono, Nombres, CorreoElectronico, Apellido, DNI)
    VALUES (@Direccion, @Telefono, @Nombres, @CorreoElectronico, @Apellido, @DNI);
END;
GO

CREATE PROCEDURE InsertarProductor
    @TipoProducto NVARCHAR(100),
    @Certificacion NVARCHAR(50),
    @Telefono NVARCHAR(20),
    @CorreoElectronico NVARCHAR(100),
    @NombresApellidos NVARCHAR(200)
AS
BEGIN
    INSERT INTO Productor (TipoProducto, Certificacion, Telefono, CorreoElectronico, NombresApellidos)
    VALUES (@TipoProducto, @Certificacion, @Telefono, @CorreoElectronico, @NombresApellidos);
END;
GO

CREATE PROCEDURE InsertarVenta
    @FechaVenta DATETIME,
    @MontoTotal DECIMAL(10, 2),
    @IDCliente INT
AS
BEGIN
    INSERT INTO Venta (FechaVenta, MontoTotal, IDCliente)
    VALUES (@FechaVenta, @MontoTotal, @IDCliente);
END;
GO

CREATE PROCEDURE InsertarDetalleVenta
    @Cantidad INT,
    @PrecioVenta DECIMAL(10, 2),
    @ProductoID INT,
    @VentaID INT
AS
BEGIN
    INSERT INTO DetalleVenta (Cantidad, PrecioVenta, ProductoID, VentaID)
    VALUES (@Cantidad, @PrecioVenta, @ProductoID, @VentaID);
END;
GO

CREATE PROCEDURE InsertarReseña
    @Fecha DATETIME,
    @Idioma NVARCHAR(20),
    @Comentario NVARCHAR(500),
    @Calificacion INT,
    @EstadoProducto NVARCHAR(50)
AS
BEGIN
    INSERT INTO Reseña (Fecha, Idioma, Comentario, Calificacion, EstadoProducto)
    VALUES (@Fecha, @Idioma, @Comentario, @Calificacion, @EstadoProducto);
END;
GO

--Inhabilitar
CREATE PROCEDURE InhabilitarProducto
    @IDProducto INT
AS
BEGIN
    UPDATE Producto
    SET Estado = 'Inhabilitado'
    WHERE IDProducto = @IDProducto;
END;
GO

CREATE PROCEDURE InhabilitarCliente
    @IDCliente INT
AS
BEGIN
    UPDATE Clientes
    SET Estado = 'Inhabilitado'
    WHERE IDCliente = @IDCliente;
END;
GO
--Habilitar
CREATE PROCEDURE HabilitarProducto
    @IDProducto INT
AS
BEGIN
    UPDATE Producto
    SET Estado = 'Activo'
    WHERE IDProducto = @IDProducto;
END;
GO

CREATE PROCEDURE HabilitarCliente
    @IDCliente INT
AS
BEGIN
    UPDATE Clientes
    SET Estado = 'Activo'
    WHERE IDCliente = @IDCliente;
END;
GO
--Actualizar
CREATE PROCEDURE ActualizarCategoriaProducto
    @IDCategoriaProducto INT,
    @Nombre NVARCHAR(100)
AS
BEGIN
    UPDATE CategoriaProducto
    SET Nombre = @Nombre
    WHERE IDCategoriaProducto = @IDCategoriaProducto;
END;
GO

CREATE PROCEDURE ActualizarProducto
    @IDProducto INT,
    @Stock INT,
    @Nombre NVARCHAR(100),
    @LugarProcedencia NVARCHAR(100),
    @UnidadMedida NVARCHAR(20),
    @Precio DECIMAL(10, 2),
    @IDCategoriaProducto INT
AS
BEGIN
    UPDATE Producto
    SET Stock = @Stock, Nombre = @Nombre, LugarProcedencia = @LugarProcedencia, UnidadMedida = @UnidadMedida, Precio = @Precio, IDCategoriaProducto = @IDCategoriaProducto
    WHERE IDProducto = @IDProducto;
END;
GO

CREATE PROCEDURE ActualizarCliente
    @IDCliente INT,
    @Direccion NVARCHAR(200),
    @Telefono NVARCHAR(20),
    @Nombres NVARCHAR(100),
    @CorreoElectronico NVARCHAR(100),
    @Apellido NVARCHAR(100),
    @DNI NVARCHAR(20)
AS
BEGIN
    UPDATE Clientes
    SET Direccion = @Direccion, Telefono = @Telefono, Nombres = @Nombres, CorreoElectronico = @CorreoElectronico, Apellido = @Apellido, DNI = @DNI
    WHERE IDCliente = @IDCliente;
END;
GO

CREATE PROCEDURE ActualizarProductor
    @IDProductor INT,
    @TipoProducto NVARCHAR(100),
    @Certificacion NVARCHAR(50),
    @Telefono NVARCHAR(20),
    @CorreoElectronico NVARCHAR(100),
    @NombresApellidos NVARCHAR(200)
AS
BEGIN
    UPDATE Productor
    SET TipoProducto = @TipoProducto, Certificacion = @Certificacion, Telefono = @Telefono, CorreoElectronico = @CorreoElectronico, NombresApellidos = @NombresApellidos
    WHERE IDProductor = @IDProductor;
END;
GO

CREATE PROCEDURE ActualizarVenta
    @IDVenta INT,
    @FechaVenta DATETIME,
    @MontoTotal DECIMAL(10, 2),
    @IDCliente INT
AS
BEGIN
    UPDATE Venta
    SET FechaVenta = @FechaVenta, MontoTotal = @MontoTotal, IDCliente = @IDCliente
    WHERE IDVenta = @IDVenta;
END;
GO

CREATE PROCEDURE ActualizarDetalleVenta
    @IDDetalleVenta INT,
    @Cantidad INT,
    @PrecioVenta DECIMAL(10, 2),
    @ProductoID INT,
    @VentaID INT
AS
BEGIN
    UPDATE DetalleVenta
    SET Cantidad = @Cantidad, PrecioVenta = @PrecioVenta, ProductoID = @ProductoID, VentaID = @VentaID
    WHERE IDDetalleVenta = @IDDetalleVenta;
END;
GO

CREATE PROCEDURE ActualizarReseña
    @IDReseña INT,
    @Fecha DATETIME,
    @Idioma NVARCHAR(20),
    @Comentario NVARCHAR(500),
    @Calificacion INT,
    @EstadoProducto NVARCHAR(50)
AS
BEGIN
    UPDATE Reseña
    SET Fecha = @Fecha, Idioma = @Idioma, Comentario = @Comentario, Calificacion = @Calificacion, EstadoProducto = @EstadoProducto
    WHERE IDReseña = @IDReseña;
END;
GO

--Adicionales
ALTER TABLE Producto ADD Estado NVARCHAR(20) DEFAULT 'Activo';
ALTER TABLE Clientes ADD Estado NVARCHAR(20) DEFAULT 'Activo';

